# Database 설계
### 흥미로운 부분이나 조금 더 고민했던 부분에 대한 구체적인 설명
----------

### 좋아요 구현하기
+ 한 명의 회원은 상품 하나당 딱 **한번만** 좋아요를 등록할 수 있습니다.
+ 사용자가 상품의 좋아요 버튼을 클릭하면, 좋아요를 **등록** 하거나 **해제** 할 수 있습니다.
+ 릴레이션은 다음과 같습니다.
<img src="/img/erd-like.PNG" width="90%" height="30%" title="like table" alt="like"></img>

##### 성능에 대한 고민.
1. like table에서 product_id,member_id를 검사해서 데이터가 있는지 확인한다 - 완전 탐색일 경우 O(N), 균형잡힌 이진트리와 같은 KEY, VALUE로 탐색할 경우, O(logN), 해시로 구현하는데 해시 충돌이 무시할 정도로 적게 발생한다면 O(1)로 데이터를 찾을 수 있다. 데이터베이스는 공간 복잡도도 고려하여, Hash 대신, B-tree로 INDEX를 구현한다고 생각한다면, 시간 복잡도는 트리의 차수에 영향을 받기 때문에 O(log(차수를 밑으로 하는)N)이 된다.(편의상 logN)
2. insert를 하거나, delete를 수행한다 - O(1) or O(logN)
3. 네트워크는 데이터 교류 횟수와 크기가 적고, 전파 지연, 큐잉 지연은 다루지 않는다고 가정한다.
#### 따라서 총 시간복잡도는 O(logN)이라 볼 수 있다.
---------
### 상품에 사진 등록하기
+ 제 1 정규화를 적용하여, list로 이루어진 사진 데이터들을 새로운 테이블에 저장한다.
+ ERD 일부는 다음과 같습니다.
<img src="/img/erd-pictures.PNG" width="90%" height="30%" title="pictures table" alt="picture"></img>
-----------
### 호텔방과 예약된호텔방 테이블 분리
+ 호텔방과, 예약된 호텔방 테이블은 hotel_id, room_id 두 개를 똑같은 primary key로 가지고 있다.
+ 호텔방은 엔터티로, db조작이 이루어져도 정보가 삭제되면 안된다(삭제 이상 방지)
+ 따라서, 호텔방에 대한 정보를 저장하는 테이블과 예약된 테이블을 나누어 예약된 방(날짜와 에약 상태를 추가로 저장)을 나타낸다
+ ERD는 다음과 같습니다.
<img src="/img/erd-rooms.PNG" width="90%" height="30%" title="room table" alt="room"></img>
-----------

# 정규화 - Project 적용
### 데이터베이스 정규화란?
  - 데이터베이스의 설계를 재구성하는 테크닉이다. 정규화를 통해 불필요한 데이터중복(redundancy)를 없애는 효과가 가장 크다.(삽입, 갱신, 삭제 이상현상)
  - 데이터 저장을 논리적으로 함으로써 발생될 수 있는 삭제 이상도 제거한다
---------------
### 제 1 정규화 적용
  1. 제 1 정규화란?
      - 각 tuple마다 column의 값이 유일해야 해야 한다 - 이를 컬럼이 원자값(Atomic Value)를 갖는다 한다
      - 프로젝트를 통한 예시
          1. products 릴레이션과 products-picture릴레이션 생성
              - 상품들에 사진이 여러개 있을 수 있는데, 그 개수가 일정하지 않아서
               각 사진에 대한 컬럼을 만들 수 없다(RDBMS). 또한, 이를 products 릴레이션의 한 컬럼에
               구분자를 통한 배열(값1,값2,값3...)로 저장할 수 있는데, 이렇게 구현할 경우 데이터의
               추가, 삭제, 갱신에 대한 복잡한 문제가 발생할 수 있다(해당 컬럼의 문자열을 조작해야 하는 이슈)
              - 이에 대한 해결책으로 pictures 릴레이션을 생성한다. 그리고, pictures의 url과, products에서 참조한 product's id를 하나의 primary key로 결정하여 유일하게 만들었다.
      
      
### 제 2 정규화 적용
  2. 제 2 정규화란?
      - 완전 함수적 종속 만들기 - 기본키의 구성중 일부에만 종속적인 컬럼이 있으면 안된다.
      - 프로젝트를 통한 예시
          1. 주로 primary key를 하나로 두거나, 일부에만 종속적이지 않도록 처리한다
